
PLAY [Update and restart LXC containers via SSH] *******************************

TASK [Gathering Facts] *********************************************************
ok: [sonarr]
ok: [tautulli]
ok: [radarr]
ok: [prowlarr]
ok: [prometheus]
ok: [plex]
ok: [flaresolwerr]
ok: [jellyseerr]
ok: [gotify]
fatal: [tdarr]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: ssh: connect to host 10.20.40.56 port 22: No route to host", "unreachable": true}
ok: [qbittorrent]
ok: [jellyfin]
fatal: [syncthing]: UNREACHABLE! => {"changed": false, "msg": "Failed to create temporary directory. In some cases, you may have been able to authenticate and did not have permissions on the target directory. Consider changing the remote tmp path in ansible.cfg to a path rooted in \"/tmp\", for more error information use -vvv. Failed command was: ( umask 77 && mkdir -p \"` echo /root/.ansible/tmp `\"&& mkdir \"` echo /root/.ansible/tmp/ansible-tmp-1749357609.3634791-2885100-131484151948062 `\" && echo ansible-tmp-1749357609.3634791-2885100-131484151948062=\"` echo /root/.ansible/tmp/ansible-tmp-1749357609.3634791-2885100-131484151948062 `\" ), exited with result 1", "unreachable": true}
ok: [homepage]
ok: [uptime_kuma]
fatal: [vaultwarden]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: ssh: connect to host 10.20.40.75 port 22: No route to host", "unreachable": true}

TASK [Update apt cache on LXC container] ***************************************
changed: [sonarr]
changed: [prometheus]
changed: [prowlarr]
changed: [radarr]
changed: [tautulli]
changed: [flaresolwerr]
changed: [qbittorrent]
changed: [plex]
changed: [jellyfin]
changed: [gotify]
changed: [homepage]
changed: [uptime_kuma]
changed: [jellyseerr]

TASK [Upgrade packages on LXC container] ***************************************
ok: [plex]
changed: [sonarr]
changed: [prometheus]
changed: [prowlarr]
fatal: [radarr]: FAILED! => {"changed": false, "msg": "'/usr/bin/apt-get dist-upgrade ' failed: E: Sub-process /usr/bin/dpkg returned an error code (1)\n", "rc": 100, "stdout": "Reading package lists...\nBuilding dependency tree...\nReading state information...\nCalculating upgrade...\nThe following packages will be upgraded:\n  libfile-find-rule-perl\n1 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.\n3 not fully installed or removed.\nNeed to get 26.7 kB of archives.\nAfter this operation, 0 B of additional disk space will be used.\nGet:1 http://security.debian.org bookworm-security/main amd64 libfile-find-rule-perl all 0.34-4~deb12u1 [26.7 kB]\napt-listchanges: Reading changelogs...\nFetched 26.7 kB in 0s (737 kB/s)\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 20363 files and directories currently installed.)\r\nPreparing to unpack .../libfile-find-rule-perl_0.34-4~deb12u1_all.deb ...\r\nUnpacking libfile-find-rule-perl (0.34-4~deb12u1) over (0.34-3) ...\r\nSetting up libfile-find-rule-perl (0.34-4~deb12u1) ...\r\nSetting up openssh-client (1:9.2p1-2+deb12u6) ...\r\nchgrp: changing group of '/usr/bin/ssh-agent': Invalid argument\r\ndpkg: error processing package openssh-client (--configure):\r\n installed openssh-client package post-installation script subprocess returned error exit status 1\r\ndpkg: dependency problems prevent configuration of openssh-sftp-server:\r\n openssh-sftp-server depends on openssh-client (= 1:9.2p1-2+deb12u6); however:\r\n  Package openssh-client is not configured yet.\r\n\r\ndpkg: error processing package openssh-sftp-server (--configure):\r\n dependency problems - leaving unconfigured\r\ndpkg: dependency problems prevent configuration of openssh-server:\r\n openssh-server depends on openssh-client (= 1:9.2p1-2+deb12u6); however:\r\n  Package openssh-client is not configured yet.\r\n openssh-server depends on openssh-sftp-server; however:\r\n  Package openssh-sftp-server is not configured yet.\r\n\r\ndpkg: error processing package openssh-server (--configure):\r\n dependency problems - leaving unconfigured\r\nProcessing triggers for man-db (2.11.2-2) ...\r\nErrors were encountered while processing:\r\n openssh-client\r\n openssh-sftp-server\r\n openssh-server\r\n", "stdout_lines": ["Reading package lists...", "Building dependency tree...", "Reading state information...", "Calculating upgrade...", "The following packages will be upgraded:", "  libfile-find-rule-perl", "1 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.", "3 not fully installed or removed.", "Need to get 26.7 kB of archives.", "After this operation, 0 B of additional disk space will be used.", "Get:1 http://security.debian.org bookworm-security/main amd64 libfile-find-rule-perl all 0.34-4~deb12u1 [26.7 kB]", "apt-listchanges: Reading changelogs...", "Fetched 26.7 kB in 0s (737 kB/s)", "(Reading database ... ", "(Reading database ... 5%", "(Reading database ... 10%", "(Reading database ... 15%", "(Reading database ... 20%", "(Reading database ... 25%", "(Reading database ... 30%", "(Reading database ... 35%", "(Reading database ... 40%", "(Reading database ... 45%", "(Reading database ... 50%", "(Reading database ... 55%", "(Reading database ... 60%", "(Reading database ... 65%", "(Reading database ... 70%", "(Reading database ... 75%", "(Reading database ... 80%", "(Reading database ... 85%", "(Reading database ... 90%", "(Reading database ... 95%", "(Reading database ... 100%", "(Reading database ... 20363 files and directories currently installed.)", "Preparing to unpack .../libfile-find-rule-perl_0.34-4~deb12u1_all.deb ...", "Unpacking libfile-find-rule-perl (0.34-4~deb12u1) over (0.34-3) ...", "Setting up libfile-find-rule-perl (0.34-4~deb12u1) ...", "Setting up openssh-client (1:9.2p1-2+deb12u6) ...", "chgrp: changing group of '/usr/bin/ssh-agent': Invalid argument", "dpkg: error processing package openssh-client (--configure):", " installed openssh-client package post-installation script subprocess returned error exit status 1", "dpkg: dependency problems prevent configuration of openssh-sftp-server:", " openssh-sftp-server depends on openssh-client (= 1:9.2p1-2+deb12u6); however:", "  Package openssh-client is not configured yet.", "", "dpkg: error processing package openssh-sftp-server (--configure):", " dependency problems - leaving unconfigured", "dpkg: dependency problems prevent configuration of openssh-server:", " openssh-server depends on openssh-client (= 1:9.2p1-2+deb12u6); however:", "  Package openssh-client is not configured yet.", " openssh-server depends on openssh-sftp-server; however:", "  Package openssh-sftp-server is not configured yet.", "", "dpkg: error processing package openssh-server (--configure):", " dependency problems - leaving unconfigured", "Processing triggers for man-db (2.11.2-2) ...", "Errors were encountered while processing:", " openssh-client", " openssh-sftp-server", " openssh-server"]}
changed: [tautulli]
changed: [qbittorrent]
changed: [jellyseerr]
changed: [gotify]
changed: [homepage]
changed: [uptime_kuma]
changed: [flaresolwerr]
changed: [jellyfin]

TASK [Reboot the container if upgrade was done] ********************************
changed: [plex]
changed: [prometheus]
changed: [prowlarr]
changed: [sonarr]
changed: [flaresolwerr]
changed: [tautulli]
changed: [jellyfin]
changed: [jellyseerr]
changed: [qbittorrent]
changed: [homepage]
changed: [gotify]
changed: [uptime_kuma]

PLAY RECAP *********************************************************************
flaresolwerr               : ok=4    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
gotify                     : ok=4    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
homepage                   : ok=4    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
jellyfin                   : ok=4    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
jellyseerr                 : ok=4    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
plex                       : ok=4    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
prometheus                 : ok=4    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
prowlarr                   : ok=4    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
qbittorrent                : ok=4    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
radarr                     : ok=2    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
sonarr                     : ok=4    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
syncthing                  : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
tautulli                   : ok=4    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
tdarr                      : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
uptime_kuma                : ok=4    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
vaultwarden                : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   

